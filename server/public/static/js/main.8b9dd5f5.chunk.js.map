{"version":3,"sources":["components/Loading/index.jsx","utils/paths.js","utils/consts.js","components/Navbar/Navbar.jsx","logo.svg","pages/HomePage.jsx","services/auth.js","pages/Signup.jsx","pages/LogIn.jsx","pages/ProtectedPage.jsx","routing-components/NormalRoute.jsx","routing-components/ProtectedRoute.jsx","App.js","index.js"],"names":["LoadingComponent","className","HOMEPAGE","SIGNUPPAGE","LOGINPAGE","PROTECTEDPAGE","ACCESS_TOKEN","APP_NAME","CAPITALIZED_APP","toUpperCase","slice","toLowerCase","Navbar","props","to","PATHS","CONSTS","user","onClick","handleLogout","HomePage","src","logo","alt","href","target","rel","internalServerError","err","console","log","response","data","errorMessage","status","successStatus","res","authService","axios","create","baseURL","process","login","credentials","post","then","catch","getLoggedIn","get","headers","Authorization","localStorage","getItem","signup","logout","delete","Signup","state","username","password","email","error","handleInputChange","event","name","value","setState","handleFormSubmission","preventDefault","setItem","accessToken","authenticate","history","push","onSubmit","this","htmlFor","id","type","placeholder","onChange","required","minLength","message","Component","Login","ProtectedPage","NormalRoute","exact","path","component","componentProps","render","ProtectedRoute","App","isLoading","componentDidMount","removeItem","LogIn","React","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8b9dd5f5.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"./Loading.css\";\r\n\r\nconst LoadingComponent = () => {\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <div className=\"spinner\">\r\n        <div className=\"bounce1\"></div>\r\n        <div className=\"bounce2\"></div>\r\n        <div className=\"bounce3\"></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingComponent;\r\n","export const HOMEPAGE = \"/\";\r\nexport const SIGNUPPAGE = \"/auth/signup\";\r\nexport const LOGINPAGE = \"/auth/login\";\r\nexport const PROTECTEDPAGE = \"/protected\";\r\n","export const ACCESS_TOKEN = \"access_token\";\r\nconst APP_NAME = \"new-app\";\r\nexport const CAPITALIZED_APP =\r\n  APP_NAME[0].toUpperCase() + APP_NAME.slice(1).toLowerCase();\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Navbar.css\";\r\nimport * as PATHS from \"../../utils/paths\";\r\nimport * as CONSTS from \"../../utils/consts\";\r\n\r\nconst Navbar = (props) => {\r\n  return (\r\n    <nav>\r\n      <Link to={PATHS.HOMEPAGE} className=\"nav__projectName\">\r\n        {CONSTS.CAPITALIZED_APP} - created with IronLauncher\r\n      </Link>\r\n\r\n      <div className=\"nav__authLinks\">\r\n        {props.user ? (\r\n          <>\r\n            <Link to={PATHS.PROTECTEDPAGE} className=\"authLink\">\r\n              Protected Page\r\n            </Link>\r\n            <button className=\"nav-logoutbtn\" onClick={props.handleLogout}>\r\n              Logout\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to={PATHS.SIGNUPPAGE} className=\"authLink\">\r\n              Signup\r\n            </Link>\r\n            <Link to={PATHS.LOGINPAGE} className=\"authLink\">\r\n              Log In\r\n            </Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","import logo from \"../logo.svg\";\r\nimport \"../App.css\";\r\n\r\nfunction HomePage() {\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n        <p>\r\n          Edit <code>src/App.js</code> and save to reload.\r\n        </p>\r\n        <a\r\n          className=\"App-link\"\r\n          href=\"https://reactjs.org\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          Learn React\r\n        </a>\r\n      </header>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomePage;\r\n","import axios from \"axios\";\r\nimport * as CONSTS from \"../utils/consts\";\r\n\r\n// here we are just maing our code look more DRY. With every backend call we must deal with errors and success states. The idea of creating these kinds of services is to make our lives easier in the components\r\nfunction internalServerError(err) {\r\n  console.log(\"err:\", err.response.data);\r\n  if (err.response && err.response.data && err.response.data.errorMessage) {\r\n    return {\r\n      status: false,\r\n      errorMessage: err.response.data.errorMessage,\r\n    };\r\n  }\r\n  return {\r\n    status: false,\r\n    errorMessage: \"Internal server error. Please check your server\",\r\n  };\r\n}\r\n\r\nfunction successStatus(res) {\r\n  return {\r\n    status: true,\r\n    data: res.data,\r\n  };\r\n}\r\n\r\n// creates a basic url for every request in this file\r\nconst authService = axios.create({\r\n  baseURL: `${process.env.REACT_APP_SERVER_URL}/auth`,\r\n});\r\n\r\nexport function login(credentials) {\r\n  return authService\r\n    .post(\"/login\", credentials)\r\n    .then(successStatus)\r\n    .catch(internalServerError);\r\n}\r\n\r\nexport function getLoggedIn() {\r\n  return authService\r\n    .get(`/session`, {\r\n      headers: {\r\n        Authorization: localStorage.getItem(CONSTS.ACCESS_TOKEN),\r\n      },\r\n    })\r\n    .then(successStatus)\r\n    .catch(internalServerError);\r\n}\r\n\r\nexport function signup(credentials) {\r\n  return authService\r\n    .post(\"/signup\", credentials)\r\n    .then(successStatus)\r\n    .catch(internalServerError);\r\n}\r\n\r\nexport function logout() {\r\n  return authService\r\n    .delete(\"/logout\", {\r\n      headers: {\r\n        Authorization: localStorage.getItem(CONSTS.ACCESS_TOKEN),\r\n      },\r\n    })\r\n    .then(successStatus)\r\n    .catch(internalServerError);\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { signup } from \"../services/auth\";\r\nimport \"./auth.css\";\r\nimport * as CONSTS from \"../utils/consts\";\r\nimport * as PATHS from \"../utils/paths\";\r\n\r\nexport default class Signup extends Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    email: \"\",\r\n    error: null\r\n  };\r\n\r\n  handleInputChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  handleFormSubmission = (event) => {\r\n    event.preventDefault();\r\n    const credentials = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n      email: this.state.email\r\n    };\r\n    signup(credentials).then((res) => {\r\n      // successful signup\r\n      console.log(res);\r\n      if (!res.status) {\r\n        // unsuccessful signup\r\n      }\r\n      localStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\r\n      this.props.authenticate(res.data.user);\r\n      this.props.history.push(PATHS.HOMEPAGE);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Sign Up</h1>\r\n        <form onSubmit={this.handleFormSubmission} className=\"auth__form\">\r\n          <label htmlFor=\"input-username\">Username</label>\r\n          <input\r\n            id=\"input-username\"\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder=\"Text\"\r\n            value={this.state.username}\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"input-password\">Password</label>\r\n          <input\r\n            id=\"input-password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            value={this.state.password}\r\n            onChange={this.handleInputChange}\r\n            required\r\n            minLength=\"8\"\r\n          />\r\n\r\n          <label htmlFor=\"input-password\">Email</label>\r\n          <input\r\n            id=\"input-email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            value={this.state.email}\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n\r\n          {this.state.error && (\r\n            <div className=\"error-block\">\r\n              <p>There was an error submiting the form:</p>\r\n              <p>{this.state.error.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          <button className=\"button__submit\" type=\"submit\">\r\n            Submit\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { login } from \"../services/auth\";\r\nimport \"./Signup\";\r\nimport * as CONSTS from \"../utils/consts\";\r\nimport * as PATHS from \"../utils/paths\";\r\n\r\nexport default class Login extends Component {\r\n  state = {\r\n    username: \"\",\r\n    password: \"\",\r\n    error: null,\r\n  };\r\n\r\n  handleInputChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  handleFormSubmission = (event) => {\r\n    event.preventDefault();\r\n\r\n    const credentials = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    };\r\n    login(credentials).then((res) => {\r\n      if (!res.status) {\r\n        // handle not great request\r\n      }\r\n      localStorage.setItem(CONSTS.ACCESS_TOKEN, res.data.accessToken);\r\n      this.props.authenticate(res.data.user);\r\n      this.props.history.push(PATHS.HOMEPAGE);\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Log In</h1>\r\n        <form onSubmit={this.handleFormSubmission} className=\"signup__form\">\r\n          <label htmlFor=\"input-username\">Username</label>\r\n          <input\r\n            id=\"input-username\"\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder=\"username\"\r\n            value={this.state.username}\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n\r\n          <label htmlFor=\"input-password\">Password</label>\r\n          <input\r\n            id=\"input-password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            value={this.state.password}\r\n            onChange={this.handleInputChange}\r\n            required\r\n            minLength=\"8\"\r\n          />\r\n\r\n          {this.state.error && (\r\n            <div className=\"error-block\">\r\n              <p>There was an error submiting the form:</p>\r\n              <p>{this.state.error.message}</p>\r\n            </div>\r\n          )}\r\n\r\n          <button className=\"button__submit\" type=\"submit\">\r\n            Submit\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nconst ProtectedPage = () => {\r\n  return (\r\n    <div>\r\n      <h1>This page is hyper protected!</h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProtectedPage;\r\n","import React from \"react\";\r\nimport { Route } from \"react-router-dom\";\r\n\r\n// this kind of component is a `wrapper` around the React router dom Route where we immediately pass every single prop down. Instead of writing things with the render\r\nconst NormalRoute = ({ exact, to, path, component, ...componentProps }) => {\r\n  const Component = component;\r\n  return (\r\n    <Route\r\n      exact={exact}\r\n      path={path || to}\r\n      render={(props) => <Component {...componentProps} {...props} />}\r\n    />\r\n  );\r\n};\r\n\r\nexport default NormalRoute;\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport * as PATHS from \"../utils/paths\";\r\n\r\n// the protected route component must take a user in order to check if the user is authenticated or not. If not moves the user to the login page\r\nconst ProtectedRoute = ({\r\n  user,\r\n  exact,\r\n  to,\r\n  path,\r\n  component,\r\n  ...componentProps\r\n}) => {\r\n  const Component = component;\r\n  if (!user) {\r\n    return <Redirect to={PATHS.LOGINPAGE} />;\r\n  }\r\n  return (\r\n    <Route\r\n      exact={exact}\r\n      path={path || to}\r\n      render={(props) => (\r\n        <Component {...componentProps} {...props} user={user} />\r\n      )}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from \"react\";\r\nimport { Switch } from \"react-router-dom\";\r\nimport LoadingComponent from \"./components/Loading\";\r\nimport Navbar from \"./components/Navbar/Navbar\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport LogIn from \"./pages/LogIn\";\r\nimport ProtectedPage from \"./pages/ProtectedPage\";\r\nimport Signup from \"./pages/Signup\";\r\nimport NormalRoute from \"./routing-components/NormalRoute\";\r\nimport ProtectedRoute from \"./routing-components/ProtectedRoute\";\r\nimport { getLoggedIn, logout } from \"./services/auth\";\r\nimport * as PATHS from \"./utils/paths\";\r\nimport * as CONSTS from \"./utils/consts\";\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    user: null,\r\n    isLoading: true,\r\n  };\r\n\r\n  componentDidMount = () => {\r\n    const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\r\n    if (!accessToken) {\r\n      return this.setState({\r\n        isLoading: false,\r\n      });\r\n    }\r\n    getLoggedIn(accessToken).then((res) => {\r\n      if (!res.status) {\r\n        console.log(\"RES IN CASE OF FAILURE\", res);\r\n        // deal with failed backend call\r\n        return this.setState({\r\n          isLoading: false,\r\n        });\r\n      }\r\n      this.setState({\r\n        user: res.data.user,\r\n        isLoading: false,\r\n      });\r\n    });\r\n  };\r\n\r\n  handleLogout = () => {\r\n    const accessToken = localStorage.getItem(CONSTS.ACCESS_TOKEN);\r\n    if (!accessToken) {\r\n      return this.setState({\r\n        user: null,\r\n        isLoading: false,\r\n      });\r\n    }\r\n    this.setState(\r\n      {\r\n        isLoading: true,\r\n      },\r\n      () => {\r\n        logout(accessToken).then((res) => {\r\n          if (!res.status) {\r\n            // deal with error here\r\n            console.error(\"💡 SOMETHING HAPPENED THAT HAS TO DEALT WITH\", res);\r\n          }\r\n\r\n          localStorage.removeItem(CONSTS.ACCESS_TOKEN);\r\n          return this.setState({\r\n            isLoading: false,\r\n            user: null,\r\n          });\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  authenticate = (user) => {\r\n    this.setState({\r\n      user,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.isLoading) {\r\n      return <LoadingComponent />;\r\n    }\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Navbar handleLogout={this.handleLogout} user={this.state.user} />\r\n        <Switch>\r\n          <NormalRoute exact path={PATHS.HOMEPAGE} component={HomePage} />\r\n          <NormalRoute\r\n            exact\r\n            path={PATHS.SIGNUPPAGE}\r\n            authenticate={this.authenticate}\r\n            component={Signup}\r\n          />\r\n          <NormalRoute\r\n            exact\r\n            path={PATHS.LOGINPAGE}\r\n            authenticate={this.authenticate}\r\n            component={LogIn}\r\n          />\r\n          <ProtectedRoute\r\n            exact\r\n            path={PATHS.PROTECTEDPAGE}\r\n            component={ProtectedPage}\r\n            user={this.state.user}\r\n          />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}