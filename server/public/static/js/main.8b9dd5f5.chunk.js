(this["webpackJsonpnew-app-client"]=this["webpackJsonpnew-app-client"]||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},47:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(31),c=a.n(r),o=(a(38),a(11)),i=a(12),u=a(15),l=a(14),h=a(2),d=(a(39),a(0)),j=function(){return Object(d.jsx)("div",{className:"wrapper",children:Object(d.jsxs)("div",{className:"spinner",children:[Object(d.jsx)("div",{className:"bounce1"}),Object(d.jsx)("div",{className:"bounce2"}),Object(d.jsx)("div",{className:"bounce3"})]})})},p=a(8),b=(a(41),"/"),m="/auth/signup",O="/auth/login",g="/protected",x="access_token",f="new-app",v=f[0].toUpperCase()+f.slice(1).toLowerCase(),w=function(e){return Object(d.jsxs)("nav",{children:[Object(d.jsxs)(p.b,{to:b,className:"nav__projectName",children:[v," - created with IronLauncher"]}),Object(d.jsx)("div",{className:"nav__authLinks",children:e.user?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.b,{to:g,className:"authLink",children:"Protected Page"}),Object(d.jsx)("button",{className:"nav-logoutbtn",onClick:e.handleLogout,children:"Logout"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(p.b,{to:m,className:"authLink",children:"Signup"}),Object(d.jsx)(p.b,{to:O,className:"authLink",children:"Log In"})]})})]})},S=a.p+"static/media/logo.6ce24c58.svg";a(47);var L=function(){return Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)("header",{className:"App-header",children:[Object(d.jsx)("img",{src:S,className:"App-logo",alt:"logo"}),Object(d.jsxs)("p",{children:["Edit ",Object(d.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(d.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})},N=a(13),I=a(33);function y(e){return console.log("err:",e.response.data),e.response&&e.response.data&&e.response.data.errorMessage?{status:!1,errorMessage:e.response.data.errorMessage}:{status:!1,errorMessage:"Internal server error. Please check your server"}}function k(e){return{status:!0,data:e.data}}var C=a.n(I).a.create({baseURL:"".concat("https://starsandstars2.herokuapp.com/api","/auth")});function A(e){return C.post("/login",e).then(k).catch(y)}function _(){return C.get("/session",{headers:{Authorization:localStorage.getItem(x)}}).then(k).catch(y)}function F(e){return C.post("/signup",e).then(k).catch(y)}function T(){return C.delete("/logout",{headers:{Authorization:localStorage.getItem(x)}}).then(k).catch(y)}a(66);var E=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",email:"",error:null},e.handleInputChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(N.a)({},n,s))},e.handleFormSubmission=function(t){t.preventDefault(),F({username:e.state.username,password:e.state.password,email:e.state.email}).then((function(t){console.log(t),t.status,localStorage.setItem(x,t.data.accessToken),e.props.authenticate(t.data.user),e.props.history.push(b)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Sign Up"}),Object(d.jsxs)("form",{onSubmit:this.handleFormSubmission,className:"auth__form",children:[Object(d.jsx)("label",{htmlFor:"input-username",children:"Username"}),Object(d.jsx)("input",{id:"input-username",type:"text",name:"username",placeholder:"Text",value:this.state.username,onChange:this.handleInputChange,required:!0}),Object(d.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(d.jsx)("input",{id:"input-password",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange,required:!0,minLength:"8"}),Object(d.jsx)("label",{htmlFor:"input-password",children:"Email"}),Object(d.jsx)("input",{id:"input-email",type:"email",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleInputChange,required:!0}),this.state.error&&Object(d.jsxs)("div",{className:"error-block",children:[Object(d.jsx)("p",{children:"There was an error submiting the form:"}),Object(d.jsx)("p",{children:this.state.error.message})]}),Object(d.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})]})]})}}]),a}(n.Component),P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={username:"",password:"",error:null},e.handleInputChange=function(t){var a=t.target,n=a.name,s=a.value;e.setState(Object(N.a)({},n,s))},e.handleFormSubmission=function(t){t.preventDefault(),A({username:e.state.username,password:e.state.password}).then((function(t){t.status,localStorage.setItem(x,t.data.accessToken),e.props.authenticate(t.data.user),e.props.history.push(b)}))},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Log In"}),Object(d.jsxs)("form",{onSubmit:this.handleFormSubmission,className:"signup__form",children:[Object(d.jsx)("label",{htmlFor:"input-username",children:"Username"}),Object(d.jsx)("input",{id:"input-username",type:"text",name:"username",placeholder:"username",value:this.state.username,onChange:this.handleInputChange,required:!0}),Object(d.jsx)("label",{htmlFor:"input-password",children:"Password"}),Object(d.jsx)("input",{id:"input-password",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleInputChange,required:!0,minLength:"8"}),this.state.error&&Object(d.jsxs)("div",{className:"error-block",children:[Object(d.jsx)("p",{children:"There was an error submiting the form:"}),Object(d.jsx)("p",{children:this.state.error.message})]}),Object(d.jsx)("button",{className:"button__submit",type:"submit",children:"Submit"})]})]})}}]),a}(n.Component),M=function(){return Object(d.jsx)("div",{children:Object(d.jsx)("h1",{children:"This page is hyper protected!"})})},U=a(10),q=a(17),D=["exact","to","path","component"],H=function(e){var t=e.exact,a=e.to,n=e.path,s=e.component,r=Object(q.a)(e,D),c=s;return Object(d.jsx)(h.b,{exact:t,path:n||a,render:function(e){return Object(d.jsx)(c,Object(U.a)(Object(U.a)({},r),e))}})},R=["user","exact","to","path","component"],z=function(e){var t=e.user,a=e.exact,n=e.to,s=e.path,r=e.component,c=Object(q.a)(e,R),o=r;return t?Object(d.jsx)(h.b,{exact:a,path:s||n,render:function(e){return Object(d.jsx)(o,Object(U.a)(Object(U.a)(Object(U.a)({},c),e),{},{user:t}))}}):Object(d.jsx)(h.a,{to:O})},J=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={user:null,isLoading:!0},e.componentDidMount=function(){var t=localStorage.getItem(x);if(!t)return e.setState({isLoading:!1});_().then((function(t){if(!t.status)return console.log("RES IN CASE OF FAILURE",t),e.setState({isLoading:!1});e.setState({user:t.data.user,isLoading:!1})}))},e.handleLogout=function(){var t=localStorage.getItem(x);if(!t)return e.setState({user:null,isLoading:!1});e.setState({isLoading:!0},(function(){T().then((function(t){return t.status||console.error("\ud83d\udca1 SOMETHING HAPPENED THAT HAS TO DEALT WITH",t),localStorage.removeItem(x),e.setState({isLoading:!1,user:null})}))}))},e.authenticate=function(t){e.setState({user:t})},e}return Object(i.a)(a,[{key:"render",value:function(){return this.state.isLoading?Object(d.jsx)(j,{}):Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(w,{handleLogout:this.handleLogout,user:this.state.user}),Object(d.jsxs)(h.d,{children:[Object(d.jsx)(H,{exact:!0,path:b,component:L}),Object(d.jsx)(H,{exact:!0,path:m,authenticate:this.authenticate,component:E}),Object(d.jsx)(H,{exact:!0,path:O,authenticate:this.authenticate,component:P}),Object(d.jsx)(z,{exact:!0,path:g,component:M,user:this.state.user})]})]})}}]),a}(s.a.Component);c.a.render(Object(d.jsx)(s.a.StrictMode,{children:Object(d.jsx)(p.a,{children:Object(d.jsx)(J,{})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.8b9dd5f5.chunk.js.map